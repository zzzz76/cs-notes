# 函数式接口

 *Java8 提供了四种函数式接口，每个接口对应不同的抽象用法*



## 目录

1. 消费函数
2. 映射函数
3. 判断函数
4. 生产函数



## 一、消费函数

Stream流的`forEach()`操作会对每个元素进行消费，具体的消费函数由调用方定制；同理，Optional的`ifPresent()`操作会对非空的元素进行消费，对空元素不进行任何的操作。

```java
/**
 * 消费函数接口
 * @param <T> 待消费的类型
 */
@FunctionalInterface
public interface Consumer<T> {
    void accept(T t);
}

/**
 * 流组件
 */
public interface Stream<T> extends BaseStream<T, Stream<T>> {
    void forEach(Consumer<? super T> action);
}

/**
 * 实例组件
 */
public final class Optional<T> {
    public void ifPresent(Consumer<? super T> consumer) {
        if (value != null)
            consumer.accept(value);
    }
}
```



负责打印元素的消费函数

```java
//定制消费函数
Consumer<Integer> consumer = new Consumer<Integer>() {
    @Override
    public void accept(Integer e) {
        System.out.println(e);
    }
};

//调用流组件
userList.stream
    .forEach(consumer);

//调用实例组件
Optional.ofNullable(user)
    .ifPresent(consumer);
```



## 二、映射函数

Stream流的`map()`操作会对所有元素进行映射，具体的映射函数由调用方定制；同理，Optional的`map()`操作会对非空的元素进行映射，对空元素不进行任何的操作。

```java
/**
 * 映射函数接口
 * @param <T> 待映射的类型
 */
@FunctionalInterface
public interface Function<T, R> {
    R apply(T t);
}

/**
 * 流组件
 */
public interface Stream<T> extends BaseStream<T, Stream<T>> {
    <R> Stream<R> map(Function<? super T, ? extends R> mapper);
}

/**
 * 实例组件
 */
public final class Optional<T> {    
    public <U> Optional<U> map(Function<? super T, ? extends U> mapper) {
        Objects.requireNonNull(mapper);
        if (!isPresent()) {
            return empty();
        } else {
            return Optional.ofNullable(mapper.apply(value));
        }
    }
}
```



将用户转换为名字的映射函数

```java
//定制映射函数
Function function = new Function<User, String>() {
    @Override
    public String apply(User user) {
        return user.getName();
    }
};

//调用流组件
userList.stream()
    .map(function)
    .forEach(consumer);

//调用实例组件
Optional.ofNullable(user)
    .map(function)
    .ifPresent(consumer);
```



## 三、判断函数





## 四、生产函数


## 基于 JSON 的语义 Web 服务自动组合系统的设计与实现

### 目录

1. 研究背景
2. 系统设计
3. 服务组合与匹配
4. 系统实现



### 一、研究背景

两个问题：

* Q1：XML编程语言不够轻便
* Q2：当下Web服务组合工具不够方便



改进角度：

* 利用语义技术提升Web服务组合与匹配精度
* 设计出更便于描述的业务流程设计方式
* 使用B/S架构提升系统兼容性
* 设计存储格式对服务及服务组合进行存储和检索



主要工作：

* 对 Web 服务组合与匹配的当前现状和亟待解决的问题进行了论述
* 提出了利用 JSON 对业务流程和组合 Web服务进行描述的完整方法
* 利用Kuhn-Munkres 算法实现对自然语言的相似度计算
* 设计并实现了一个组合 Web 服务 Qos 的计算方法
* 实现了用户交互界面，对Web服务和业务流程进行管理



相关技术：

|                   | 技术          | 描述                       |
| ----------------- | ------------- | -------------------------- |
| Web 服务引擎      | Apache Axis 2 | Web服务框架                |
|                   | Apache ODE    | 实现了BPEL流程的可视化开发 |
|                   | Oracle BPEL   | BPEL集成工具包             |
| 自然语言处理      | Apache Lucene | 全文检索工具包             |
|                   | WordNet       | 基于认知语言学的英语词典   |
|                   | JWI           | 对WordNet进行访问的API类库 |
| 本体与语义Web服务 | OWL           | Web本体语言                |
|                   | OWL-S         | Web服务本体语言            |

词汇表 -> 分类法 -> 本体



### 二、系统设计

系统需求：

* 使用可视化工具对Web服务进行组合，并将既定的组合转化为JSON代码编号存储，之后检索出需要的JSON代码，通过执行引擎构建组合服务。

| 角色       | 基础服务管理       | 业务流程管理                 |
| ---------- | ------------------ | ---------------------------- |
| 用户       | 服务查看           | 流程查看、组合服务执行       |
| 管理员     | 服务删除           | 流程删除                     |
| 服务提供者 | 服务添加、服务修改 | 流程添加、流程修改、流程匹配 |



系统总体框架

* Apache Server：为OWL-S文件、OWL本体文件以及WSDL文件提供了一个部署环境
* Web 服务数据库：存储基础服务管理、业务流程管理的相关信息
* 服务组合模块：根据服务描述生成服务组合图
* 服务匹配模块：根据业务流程，在服务组合图中寻找组合服务路径
* 业务流程转换模块：将服务组合路径用JSON进行描述，并存储到数据库中
* 服务执行模块：解析服务组合的JSON代码



基于 JSON 的业务流程描述

* 业务活动描述：根据input、output、description三个参数，去匹配数据库中存在的业务流程
* 业务流程描述：



数据库设计：

* 服务表
* 参数表
* 流程表
* 组合服务表
* 用户表



模块设计：

* Apache Server：为OWL-S文件、OWL本体文件以及WSDL文件提供了一个部署环境
* Web 服务数据库：存储基础服务管理、业务流程管理的相关信息
* 服务组合模块：根据服务描述生成服务组合图
* 服务匹配模块：根据业务流程，在服务组合图中寻找组合服务路径
* 业务流程转换模块：将服务组合路径用JSON进行描述，并存储到数据库中
* 服务执行模块：解析服务组合的JSON代码



### 三、服务组合与匹配

#### 1. 参数提取

从OWL-S文件中提取出输入输出参数，并存储到数据库中



#### 2. 服务组合算法

服务组合算法是指，通过将所有的Web服务作为顶点，若某顶点A的输出参数集与顶点B的输入参数集相同或相似，则添加一条从顶点A指向顶点B的边，由此建立一个有向无环图，图中的任何一条路径都可以看做是一个组合服务。

![image-20210914201114480](image-20210914201114480.png)

算法步骤：

1. 添加有向边

2. 建立服务组合图



**Q1：**

如何在顶点之间添加有向边？

**A1：**

通过比较顶点的某个输出参数，与其他顶点的某个输入参数，是否相同或相似，即计算是否存在两个参数之间相同或相似。

![image-20210915104014463](image-20210915104014463.png)



**Q2：**

如何判断相似度？

**A2：**

借助OWL本体文件和参数类型判断相似度，图中类2与类1、类3与类1相似，类2与类3之间通过最短路径距离计算语义相似度，类4与类123不相似。

![image-20210915101813741](image-20210915101813741.png)



**Q3：**

如何计算语义相似度？

**A3：**

通过结点在OWL树上的路径距离计算相似度，

![image-20210915102402409](image-20210915102402409.png)



**Q4：**

如何建立服务组合图

**A4：**

逐个顶点遍历，对顶点的所有邻接结点，执行有向边添加算法

![image-20210915105443481](image-20210915105443481.png)

![image-20210915105515375](image-20210915105515375.png)



#### 3. 服务匹配算法

服务匹配算法是指，通过用户提供的输入输出参数集，可以在服务组合图中匹配多个顶点作为组合服务路径的开始顶点和结束顶点，从而得到不定数量的连通路径，再通过组合服务的文本描述与用户提供的服务需求进行语义相似度的匹配，从中选择与业务需求最符合的组合服务。

<img src="image-20210914214146045.png" alt="image-20210914214146045" style="zoom:50%;" />



算法步骤：

1. 计算参数集相似度
2. 获取组合服务
3. 计算服务描述相似度
4. 基于语义相似度筛选服务组合



算法核心：

* 用户提供的参数集和OWL-S文件中提供的参数集的相似度计算，本文采用KM算法对两个参数集的相似度进行计算。



#### 4. 组合服务的筛选

#### 



### 系统实现



### 结论与展望


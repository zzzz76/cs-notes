# 2.4 算术逻辑单元 ALU

## 目录

1. 逻辑运算
2. 加法器
3. 算术逻辑单元



## 逻辑运算

|             | 与          | 或    | 非             | 异或         |
| ----------- | ----------- | ----- | -------------- | ------------ |
| C语言表达式 | &&          | \|\|  | !              | ^            |
| 逻辑表达式  | $A \cdot B$ | $A+B$ | $\overline{A}$ | $A \oplus B$ |



## 加法器

**一位全加器：**

* 本位 $S_i = A_i \oplus B_i \oplus C_i$
* 进位 $C_i = A_i \cdot B_i + (A_i \oplus B_i) \cdot C_{i-1}$

![image-20210826164743057](image-20210826164743057.png)

**串行加法器：**

* 串行产生进位信号

* 每次产生一位和，串行逐位送回寄存器

![image-20210826171251838](image-20210826171251838.png)

**组内并行、组间串行加法器：**

* 步骤1，计算 $G_i$ 和 $P_i$ ，其中 $G_i = A_i \cdot B_i$， $P_i = A_i \oplus B_i$
* 步骤2，根据 $C_i = G_i + P_i \cdot C_{i-1}$，对 $C_i$ 进行展开可得：
  * $C_1 = G_1 + P_1 \cdot C_0$
  * $C_2 = G_2 + P_2 \cdot C_1 = G_2 + P_2 \cdot G_1 + P_2 \cdot P_1 \cdot C_0$
  * $C_3 = G_3 + P_3 \cdot C_2 = G_3 + P_3 \cdot G_2 + P_3 \cdot P_2 \cdot G_1 + P_3 \cdot P_2 \cdot P_1 \cdot C_0$
  * $C_4 = G_4 + P_4 \cdot C_3 = Fun(G_4, G_3, G_2, G_1, P_4, P_3, P_2, P_1, C_0)$
* 步骤3，计算 $S_1, S_2, S_3, S_4$

![image-20210826171553050](image-20210826171553050.png)

**组内并行、组间并行加法器：**

* 步骤1，计算 $G_i$ 和 $P_i$ ，其中 $G_i = A_i \cdot B_i$， $P_i = A_i \oplus B_i$

* 步骤2，计算 $G_j^*$ 和 $P_j^*$，其中 $G_j^* = G_4 + P_4 \cdot G_3 + P_4 \cdot P_3 \cdot G_2 + P_4 \cdot P_3 \cdot P_2 \cdot G_1$，$P_j^* = P_4 \cdot P_3 \cdot P_2 \cdot P_1$
* 步骤3，对 $C_i$ 进行展开可得：
  * $C_4 = G_1^* + P_1^* \cdot C_0$
  * $C_8 = G_2^* + P_2^* \cdot C_4 = G_2^* + P_2^* \cdot G_1^* + P_2^* \cdot P_1^* \cdot C_0$
  * $C_{12} = G_3^* + P_3^* \cdot C_8 = G_3^* + P_3^* \cdot G_2^* + P_3^* \cdot P_2^* \cdot G_1^* + P_3^* \cdot P_2^* \cdot P_1^* \cdot C_0$
  * $C_{16} = G_4^* + P_4^* \cdot C_{12} = Fun(G_4^*, G_3^*, G_2^*, G_1^*, P_4^*, P_3^*, P_2^*, P_1^*, C_0)$
* 步骤4，计算 $S_1, S_2 ... S_{16}$

![image-20210826173242622](image-20210826173242622.png)



## 算术逻辑单元

**ALU的功能：**

* 逻辑运算：与、或、非、异或
* 算术运算：加、减、乘、除



**ALU的基本结构：**

![image-20210826161012546](image-20210826161012546.png)

**ALU的芯片结构：**

![image-20210826162618637](image-20210826162618637.png)

**ALU芯片的优化：**

* 16位的组内并行、组间串行ALU

![image-20210826174127671](image-20210826174127671.png)

* 16位的组内并行、组间并行ALU

![image-20210826174137939](image-20210826174137939.png)
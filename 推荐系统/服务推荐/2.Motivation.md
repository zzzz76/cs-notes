# 2.Motivation

仅靠传统的矩阵分解模型不能产生个性化的推荐，因为它忽略了与用户服务交互作用无关的因子。在与用户服务交互作用无关的因子中，我们重点研究了网络偏差对Qos预测的影响，因为在服务预测的过程中，用户对服务的调用往往涉及到两个网络的通信，而网络间通信路径的差异会很大程度上影响用户的质量评分。为了更直接的解释这个问题，本节首先使用一个简单的例子来说明网络偏差是如何影响基于矩阵分解模型的Qos预测，然后介绍了我们从中获得的启发以及如何改进传统的矩阵分解方法。

## 2.1 Problem Example

已知用户服务的调用关系如图1，用户$u_1$，$u_2$位于自治域AS1中，服务$w_1$，$w_2$和服务$w'_1$，$w'_2$完全相同，前者位于自治域AS2中，后者位于自治域AS3中。那么我们要如何预测用户$u_1$，$u_2$对服务$w_1$，$w_2$，$w'_1$，$w'_2$的质量评分呢？

<img src="image-20220207115214348.png" alt="image-20220207115214348" style="zoom: 50%;" />



## 2.2 Classic Method

在矩阵分解中，低维度的特征矩阵试图通过描述用户和服务在各个因子上的特征来解释Qos值。例如，服务隐向量的每个维度值的大小代表了该服务具备这些因子的程度，用户隐向量的每个维度值的大小代表了用户对这些因子的感知程度，用户隐向量和服务隐向量的点积代表了用户和服务之间的交互作用，也就是用户调用服务的Qos值。

如图2所示，我们假设用户调用服务的Qos值由两种潜在因子决定，这两种潜在因子分别为硬件组成和软件配置。以用户$u_1$和服务$w_1$，$w'_1$为例。用户$u_1$对硬件组成因子的感知程度为0.6，对软件配置因子的感知程度为0.4，服务$w_1$对硬件组成因子的具备程度为1.0，对软件配置因子的具备程度为0.5，用户$u_1$与服务$w_1$的点积代表了用户$u_1$调用服务$w_1$的Qos值，为0.8。由于服务$w_1$和$w'_1$完全相同，它们对潜在因子的具备程度也完全相同，因此用户$u_1$调用服务$w'_1$的Qos值也为0.8。 

<img src="image-20220207115302267.png" alt="image-20220207115302267" style="zoom:50%;" />

然而，传统的矩阵分解方法并没有考虑到用户和服务之间的非交互作用，也就是网络偏差对Qos预测的影响。以响应时间为例，用户感知到的服务响应时间必须包括网络延迟。这不是一个小问题，因为网络延迟会根据通信路径的不同而有很大的差异[12]。换句话说，服务$w_1$和服务$w'_1$虽然完全相同，但是它们所属自治域不同（服务$w_1$位于AS2，服务$w'_1$位于AS3），用户调用它们的Qos值也会有很大不同。因此，在这种情况下，以前的工作所做的 QoS 预测是不准确的。

## 2.3 Our Method

由于这些网络偏置值在观察到的评分中占很大比例，因此对他们进行准确的建模就显得至关重要。如果我们将网络偏置看做是一个连续的值而不是离散的值，那么就可以借助线性回归思想来预测目标用户对目标服务的网络偏置值。按照以上思路，我们提出了基于网络偏置的矩阵分解方法。我们的建模方法把这些与用户服务交互作用无关的网络偏置封装到线性回归模型中，而把真正代表用户-服务交互作用的那部分数据放到更适合用户偏好的矩阵分解模型中。 

改进后的评分预测过程如图3所示。假设自治域AS1的用户调用自治域AS2的服务的Qos均值$\mu_{A_1,A_2}$为1，自治域AS1的用户调用自治域AS3的服务的Qos均值$\mu_{A_1,A_3}$为2。假设用户$u_1$感知到的Qos值与同自治域平均值的偏差值$bu_1$为0，服务$w_1$具有的Qos值与同自治域平均值的偏差值$bw_1$为0.1，服务$w'_1$具有的Qos值与同自治域平均值的偏差值$bw'_1$为0.2。以用户$u_1$调用服务$w_1$，$w'_1$为例。用户$u_1$调用服务$w_1$的网络偏置值为$bu_1 + bw_1 + \mu_{A_1,A_2}=1.1$，加上之前得到的只依赖于用户和服务交互作用的预测值0.8，可以得到用户$u_1$调用服务$w_1$的最终Qos预测值为1.9。同理，用户$u_1$调用服务$w'_1$的网络偏置值为$bu_1 + bw'_1 + \mu_{A_1,A_3}=2.2$，加上之前得到的只依赖于用户和服务交互作用的预测值0.8，可以得到用户$u_1$调用服务$w'_1$的最终Qos预测值为3.0。

<img src="image-20220207202606414.png" alt="image-20220207202606414" style="zoom:50%;" />



我们改进了传统的矩阵分解模型，提出了基于网络偏置的矩阵分解模型。我们的方法既考虑了与用户服务交互作用相关的因子，又考虑了与用户服务交互作用无关的因子。这使得我们的方法对于复杂的网络环境具备很好的适应性。

